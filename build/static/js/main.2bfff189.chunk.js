(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{16:function(e,n,t){e.exports=t(40)},21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),o=t.n(c),u=(t(21),t(3)),i=function(e){if(""===e.matcher)return e.persons.map((function(n){return r.a.createElement("li",{className:"person",key:n.id},n.name," ",n.number,r.a.createElement("button",{onClick:function(){return e.onClick(n.name,n.id)},key:n.id},"delete"))}));var n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.matcher.toLowerCase())}));return 0===n.length?r.a.createElement("div",null,"No results"):n.map((function(e){return r.a.createElement("li",{className:"person",key:e.id},e.name," ",e.number)}))},l=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.matcher,onChange:e.onMatcherChange})))},s=function(e){return r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.name,onChange:e.onNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.number,onChange:e.onNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=t(2),f=t.n(m),d=t(4),h=t(5),p=t.n(h),b="api/persons",v={getAll:function(){var e=Object(d.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get(b);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(b,n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(f.a.mark((function e(n,t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat(b,"/").concat(n),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deleteItem:function(){var e=Object(d.a)(f.a.mark((function e(n){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat(b,"/").concat(n));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},g=function(e){return null===e.message?null:r.a.createElement("div",{className:e.className},e.message)};var w=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),m=Object(u.a)(o,2),f=m[0],d=m[1],h=Object(a.useState)(""),p=Object(u.a)(h,2),b=p[0],w=p[1],E=Object(a.useState)(""),k=Object(u.a)(E,2),j=k[0],O=k[1],C=Object(a.useState)(null),y=Object(u.a)(C,2),N=y[0],S=y[1],x=Object(a.useState)(""),A=Object(u.a)(x,2),I=A[0],M=A[1];return Object(a.useEffect)((function(){v.getAll().then((function(e){return c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:N,className:I}),r.a.createElement(l,{matcher:j,onMatcherChange:function(e){O(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(s,{onSubmit:function(e){e.preventDefault();var n={name:f,number:b},a=t.filter((function(e){return e.name===n.name}));1===a.length?function(e){if(window.confirm("".concat(e.name," is already added to the phonebook, replace the old number with a new one?"))){var n={name:e.name,number:b,id:e.id};v.update(e.id,n).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e})))})).catch((function(n){S("Information of ".concat(e.name," has already been removed from server")),M("error"),setTimeout((function(){S(null),M("")}),2e3),c(t.filter((function(n){return n.id!==e.id})))}))}}(a[0]):(v.create(n).then((function(){v.getAll().then((function(e){return c(e)}))})),S("Added ".concat(n.name)),M("success"),setTimeout((function(){S(null),M("")}),2e3)),d(""),w("")},name:f,onNameChange:function(e){d(e.target.value)},number:b,onNumberChange:function(e){w(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(i,{persons:t,matcher:j,onClick:function(e,n){window.confirm("Delete ".concat(e,"?"))&&v.deleteItem(n).then(v.getAll().then((function(e){return c(e)}))).catch((function(n){S("Information of ".concat(e," had already been removed from server")),M("error"),setTimeout((function(){S(null),M("")}),2e3)}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.2bfff189.chunk.js.map